<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Welcome | Planner</title>
  <style>
    :root {
      --bg: #0c0d10; --panel:#12141a; --text:#e9ebf0; --muted:#a7adbb; --border:#262a33; --brand:#4f8cff; --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    @media (prefers-color-scheme: light){:root{--bg:#f6f7fb;--panel:#fff;--text:#0b0f19;--muted:#566076;--border:#e6e9f0;--brand:#2f6df6;--shadow:0 10px 30px rgba(20,30,55,.08);}}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",Arial; background:var(--bg); color:var(--text);}
    .container{width:min(900px,92%);margin:0 auto;padding:28px 0;position:relative;}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius); box-shadow:var(--shadow); padding:24px;position:relative;}
    h1{margin:0 0 8px; font-size:clamp(28px,4vw,40px)}
    p.lead{margin:0 0 20px;color:var(--muted)}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;height:44px;padding:0 16px;border-radius:12px;border:1px solid var(--border); background:var(--panel); color:var(--text); cursor:pointer}
    .btn:hover{transform:translateY(-1px)}
    .btn-primary{background:var(--brand);color:#0a1a3a;border-color:color-mix(in oklab, var(--brand) 70%, black)}
    .btn-ghost{background:transparent}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row + .row{margin-top:10px}
    label{font-size:12px;color:var(--muted)}
    input,select{width:100%;height:44px;padding:0 12px;border-radius:12px;border:1px solid var(--border); background:transparent;color:var(--text);}
    .actions{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
    [hidden]{display:none !important}
    footer{color:var(--muted); text-align:center; padding:20px 0}
    /* --- Timetable --- */
    .timetable h2{margin:0 0 12px; font-size:22px}
    .tt-grid{display:grid; grid-template-columns: 110px repeat(5, 1fr); gap:10px}
    .tt-cell{background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:10px; min-height:60px; display:flex; align-items:center; justify-content:center; text-align:center}
    .tt-head{background:transparent; border:1px dashed var(--border); color:var(--muted); font-weight:600}
    .tt-period{font-weight:600}
    .tt-empty{color:var(--muted); opacity:.7}
    .confirm-btn{position:absolute;bottom:20px;right:20px;}
  </style>
</head>
<body>
  <main class="container">
    <section id="view-welcome" class="card">
      <h1>Welcome to our app</h1>
      <p class="lead">Do you already have an account? If so, log in. Otherwise, sign up to create a new one.</p>
      <div class="actions">
        <button class="btn btn-primary" onclick="showView('login')">Log In</button>
        <button class="btn" onclick="showView('signup')">Sign Up</button>
      </div>
    </section>

    <section id="view-login" class="card" hidden>
      <h2>Log In</h2>
      <form id="login-form">
        <div class="row">
          <div style="flex:1">
            <label>User ID</label>
            <input id="login-id" required placeholder="your_id" />
          </div>
        </div>
        <div class="row">
          <div style="flex:1">
            <label>Password</label>
            <input id="login-password" type="password" required placeholder="••••••••" />
          </div>
        </div>
        <div class="actions">
          <button class="btn btn-primary" type="submit">Log In</button>
          <button class="btn btn-ghost" type="button" onclick="showView('welcome')">Back</button>
        </div>
      </form>
    </section>

    <section id="view-signup" class="card" hidden>
      <h2>Sign Up</h2>
      <form id="signup-form">
        <div class="row">
          <div style="flex:1">
            <label>User ID</label>
            <input id="su-id" required placeholder="your_id" />
          </div>
          <div style="flex:1">
            <label>Email</label>
            <input id="su-email" type="email" required placeholder="you@example.com" />
          </div>
        </div>
        <div class="row">
          <div style="flex:1">
            <label>Password</label>
            <input id="su-password" type="password" required placeholder="8+ characters" />
          </div>
          <div style="flex:1">
            <label>Confirm Password</label>
            <input id="su-password2" type="password" required placeholder="retype password" />
          </div>
        </div>
        <div class="row">
          <div style="flex:1">
            <label>University</label>
            <input id="su-university" required placeholder="Ritsumeikan University" />
          </div>
          <div style="flex:1">
            <label>Department</label>
            <select id="su-department" required>
              <option value="business">Business Department</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div style="flex:1">
            <label>Grade</label>
            <select id="su-grade" required>
              <option value="1">1st Year</option>
              <option value="2">2nd Year</option>
              <option value="3">3rd Year</option>
              <option value="4">4th Year</option>
              <option value="graduate">Graduate</option>
            </select>
          </div>
        </div>
        <div class="actions">
          <button class="btn btn-primary" type="submit">Create Account</button>
          <button class="btn btn-ghost" type="button" onclick="showView('welcome')">Back</button>
        </div>
      </form>
    </section>

    <section id="view-prefs" class="card" hidden>
      <h2>Tell us your preferences</h2>
      <p class="lead">Choose up to five preferences.</p>
      <form id="prefs-form">
        <div class="row"><label>1) Prefer morning or late classes?</label><select class="pref-select"><option value="none">No Preference</option><option>Morning</option><option>Late</option></select></div>
        <div class="row"><label>2) Final exam preference?</label><select class="pref-select"><option value="none">No Preference</option><option>No final exam</option><option>Final exam OK</option></select></div>
        <div class="row"><label>3) One free day?</label><select class="pref-select"><option value="none">No Preference</option><option>Yes</option><option>No</option></select></div>
        <div class="row"><label>4) On-demand or in-person?</label><select class="pref-select"><option value="none">No Preference</option><option>On-demand</option><option>In-person</option></select></div>
        <div class="row"><label>5) Liberal arts?</label><select class="pref-select"><option value="none">No Preference</option><option>Want</option><option>Don't want</option></select></div>
        <div class="actions">
          <button class="btn btn-primary" type="submit">Save Preferences</button>
          <button class="btn btn-ghost" type="button" onclick="showView('welcome')">Back to Welcome</button>
        </div>
      </form>
    </section>

    <section id="view-schedule" class="card" hidden>
      <h2>Recommended Timetable</h2>
      <div id="schedule-container" class="timetable"></div>
      <div class="actions">
        <button class="btn" onclick="showView('prefs')">Back to Preferences</button>
        <button class="btn btn-primary" onclick="regenerateSchedule()">Generate Again</button>
        <button class="btn btn-primary confirm-btn" onclick="alert('Schedule confirmed!')">Confirm</button>
      </div>
    </section>
  </main>

  <footer>© 2025 Planner</footer>

  <script>
    function showView(name){
      const views=['welcome','login','signup','prefs','schedule'];
      views.forEach(v=>{
        const el=document.getElementById(`view-${v}`);
        if(el) el.hidden=(v!==name);
      });
      window.scrollTo({top:0,behavior:'smooth'});
    }

    document.getElementById('signup-form').addEventListener('submit',e=>{
      e.preventDefault();
      const p1=document.getElementById('su-password').value;
      const p2=document.getElementById('su-password2').value;
      if(p1!==p2){alert('Passwords do not match');return;}
      showView('prefs');
    });

    const DAYS=['Mon','Tue','Wed','Thu','Fri'];
    const PERIODS=[1,2,3,4,5];

    function generateDemoSchedule(){
      const labels='ABCDEFGHIJ'.split('');
      const schedule={};
      let idx=0,toPlace=8;
      while(toPlace>0&&idx<26){
        const d=DAYS[Math.floor(Math.random()*DAYS.length)];
        const p=PERIODS[Math.floor(Math.random()*PERIODS.length)];
        const key=`${d}-${p}`;
        if(!schedule[key]){schedule[key]=`Class ${labels[(8-toPlace)%labels.length]}`;toPlace--;}
        idx++;
      }
      return schedule;
    }

    function renderSchedule(schedule){
      const wrap=document.getElementById('schedule-container');
      let html='<div class="tt-grid">';
      html+='<div class="tt-cell tt-head">Time</div>';
      DAYS.forEach(d=>html+=`<div class="tt-cell tt-head">${d}</div>`);
      PERIODS.forEach(p=>{
        html+=`<div class=\"tt-cell tt-period\">${p}st</div>`;
        DAYS.forEach(d=>{
          const key=`${d}-${p}`;
          const label=schedule[key]||'';
          html+=`<div class=\"tt-cell ${label?'':'tt-empty'}\">${label||'-'}</div>`;
        });
      });
      html+='</div>';
      wrap.innerHTML=html;
    }

    function regenerateSchedule(){
      const schedule=generateDemoSchedule();
      renderSchedule(schedule);
    }

    document.getElementById('prefs-form').addEventListener('submit',e=>{
      e.preventDefault();
      const schedule=generateDemoSchedule();
      renderSchedule(schedule);
      showView('schedule');
    });
  </script>
</body>
</html>